datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Paciente {
  id        String   @id @default(uuid())
  nome      String
  dtNasc    DateTime?
  cpf       String?  @unique
  telefone  String?
  email     String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  consultas Consulta[]
}

model Consulta {
  id         String   @id @default(uuid())
  pacienteId String?
  paciente   Paciente? @relation(fields: [pacienteId], references: [id])
  tipo       ConsultaTipo
  inicio     DateTime
  fim        DateTime
  status     ConsultaStatus @default(AGENDADA)
  salaId     String?
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}

enum ConsultaTipo {
  PRESENCIAL
  TELE
}

enum ConsultaStatus {
  AGENDADA
  CONCLUIDA
  CANCELADA
}

model Plantao {
  id           String   @id @default(uuid())
  inicio       DateTime
  fim          DateTime
  local        String
  contratante  String
  tipo         String
  valorBruto   Decimal  @db.Decimal(12,2)
  valorLiquido Decimal? @db.Decimal(12,2)
  statusPgto   StatusPgto @default(PENDENTE)
  notas        String?
  pagamentos   PagamentoPlantao[]
  createdAt    DateTime @default(now())
}

enum StatusPgto {
  PENDENTE
  PAGO
  PARCIAL
  ATRASADO
}

model PagamentoPlantao {
  id             String   @id @default(uuid())
  plantaoId      String
  plantao        Plantao  @relation(fields: [plantaoId], references: [id])
  dtPrevista     DateTime?
  dtPgto         DateTime?
  valorPago      Decimal  @db.Decimal(12,2)
  comprovanteKey String?
  obs            String?
}
